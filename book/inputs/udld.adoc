= UDLD

:experimental:
:imagesdir: ../images
:icons: fonts

menu:Catalyst 3560 Configuration Guides[ http://www.cisco.com/c/en/us/td/docs/switches/lan/catalyst3750x_3560x/software/release/15-0_2_se/configuration/guide/3750x_cg/swudld.html[UDLD]]

== Overview 

- Problem:  unidirectional links 
  * one of the 2 transmission paths has failed but not both
  * due to miscabling, cutting on fiber cable, unplugging one fiber, GBIC problems, ...
  * can cause a loop as the previously blocking port will move to a forwarding state

image::stp-unidirectional-links.png[height=150]

- solutions: 

UDLD **u**ni**d**irectional **l**ink **d**etection:::
Uses Layer 2 messaging to decide when a switch can no longer receive frames from
a neighbor. The switch whose transmit interface did not fail is placed into an err-disabled
state.

UDLD aggressive mode:::
Attempts to reconnect with the other switch (eight times) 
after realizing no messages have been received. 
If the other switch does not reply to the repeated additional messages, 
both sides become err-disabled.

=== Modes Of Operations

==== Normal

- default
- detects unidirectional links due to misconnected ports on fiber-optic connection 

==== Aggresive Mode




== Tasks


=== Default Configuration

[format="dsv"]
|===
Feature                                                    : Default Setting
UDLD global enable state                                   : Globally disabled
UDLD per-port enable state for fiber-optic media           : Disabled on all Ethernet fiber-optic ports
UDLD per-port enable state for UTP copper media            : Disabled on all Ethernet 10/100/1000BASE-TX ports
UDLD aggressive mode                                       : Disabled
|===

.Task: Enable UDLD Globally
----
(config)# udld {aggressive | enable | message time <seconds>}
----

message time <seconds>::
- configure the period of time between UDLD probe messages on ports
that are in the advertisement phase and are detected to be bidirectional.
- range: 1 to 90 seconds 
- default: 15 seconds



- This command affects fiber-optic ports only. Use *(config-if)# udld* 
to enable UDLD on other port types.

.Task: Enable UDLD on an Interface

.Task: Reset an Interface Disabled by UDLD
----
udld reset 
----

You can also  restart the disabled port

- *shutdown* followed by *no shutdown* 
- *no udld {aggressive | enable}* followed by *udld {aggressive | enable}*
- *no udld port* followed by *udld port [aggressive]* 

== UDLD Error-Disabled State

.Task: Recover from the UDLD Error-Disabled State
----
! Enable UDLD to automatically recover
(config)# errdisable recovery cause udld 

! Specify the time to recover from the UDLD error-disabled state
(config-if)# errdisable recovery interval <seconds>
----

.Task: Display UDLD Status
----
show udld [interface-id]
----
